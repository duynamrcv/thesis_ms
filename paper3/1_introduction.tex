\section{Introduction}

Formation control of multiple robots enables various real-world applications such as mapping, construction, and search and rescue~\cite{9306908,Oh2015}. These missions are often performed in harsh environments with clustered environments. To effectively cope with those tasks, it is crucial to ensure the safety of the robots both in their surrounding environments and with each other.

Natural formation collectives, such as school of fish or flocking of birds, reveal that coordinated navigation can be achieved through decentralized decision-making~\cite {Nagy2010}. Their motion can be explained by a set of simple rules based on the local information exchange, including repulsion that steers an agent away from its neighbors, cohesion that attracts the agent to the group, migration that orients its motion in a preferred direction, and additional repulsion from obstacles to avoid collisions with the environment~\cite{Reynolds1987}. Various swarm models based on the above rules have been implemented for swarm robots using artificial potential fields (APF)~\cite{736776,Berlinger2021,9565893}. For instance, in~\cite{736776}, formation behaviors are integrated with other navigational behaviors to guide a robotic team to reach navigational goals, avoid collision, and maintain formation shape. Other research in~\cite{Berlinger2021} demonstrates the 3D collective behaviors with a swarm of fish-inspired miniature underwater robots using only implicit communication. However, achieving effective obstacle avoidance in limited space environments using potential field methods remains challenging for real robot swarms, as the density of obstacles can affect the robot's speed when navigating through such environments~\cite{131810}.

In practice, this issue can be addressed by tuning parameters (i.e., preferred speed, cohesion, repulsion, and other coefficients) specific to the environment and swarm configurations~\cite{Elkilany2020,Vsrhelyi2018}. Selecting the appropriate set of parameters is also challenging when the robot formation moves through different environments due to increased model complexity and the higher number of tunable parameters. In~\cite{Elkilany2020}, a swarm robot model is proposed that controls the contraction/expansion of the robot formation using the APF method and an artificial neural network to optimize potential force parameters to adapt to environmental conditions. Experiments performed with three Turtlebot3 robots show that the proposed approach maintains formation distance and can adapt to the movement space, compared to the traditional APF approach. However, it is designed to create a formation structure that cannot navigate through narrow spaces. In~\cite{Vsrhelyi2018}, a communication-aware flocking control for a drone swarm is proposed using an evolutionary optimization framework to select appropriate order parameters and fitness functions to maximize the velocity and cohesion of the swarm. The drone moving in front must always promptly notify the drones behind to avoid crowding into the wall. Results demonstrated with thirty drones moving in tight formation and remaining within a limited area in which the drones avoided collisions with each other and with virtual obstacles by dividing and merging. The control algorithm shows the ability to arrange and expand formations in large spaces but does not demonstrate the ability of formation transitions in narrow environments. Parametric optimization APF-based approaches generally adjust the parameters of behavioral functions, forcing them to alter their formation shape according to environmental influences, but they cannot control the formation shape.

Alternative approaches using optimization for achieving navigation and/or formation control of a swarm have gained considerable attention in the last decade due to their significant impacts on swarm sustainability and their ability to address swarm constraints~\cite{Beaver2021}. The works~\cite{7828016,Wu2020} also demonstrated the remarkable potential of modern optimization-based motion planners for ensuring collision avoidance in multi-robot systems, although these planners are designed for individual point-to-point transitions and do not generate self-organized cohesive flight similar to biological swarms. Recent studies suggest that predictive controllers can improve the safety of robot swarms by predicting and optimizing the agentsâ€™ future behavior in an iterative process~\cite{Soria2021,8950150}. Model predictive control computes the control action of a system as the solution to an optimization problem that explicitly accounts for the robot dynamics and actuation constraints. The main limitation of MPC for performing these problems is its high computational cost~\cite{Darby2012,Bui2022}. Fortunately, the development of computational techniques and the support of various powerful libraries can handle this disadvantage in recent years~\cite{Soria2021,Bui2022,2020SciPy-NMeth}. %Moreover, the computation can be shared among all agents according to a distributed MPC (DMPC) formulation. With DMPC, every robot solves an optimal problem locally and then communicates its solution to others to allow global coordination~\cite{9562281,Vargas2022}. 

In ~\cite{Soria2021}, a swarm navigation method using MPC for moving through a clustered environment is proposed and successfully implemented on a real drone system. Inspired by swarm behavior, the algorithm proposes corresponding cost functions and constraints for the robot swarm. The algorithm has proven its ability to navigate, maintain speed, and ensure safety. However, they are being deployed in a centralized manner, which is not feasible in practice moving far from the coordination center. An alternative distributed MPC version~\cite{9562281} is carried out with distributed computing implementation for homogeneous robots, demonstrating the possibility of implementing distributed MPC in a real system. Nonetheless, this approach still ensures that robots maintain a distance in large spaces without considering formation transitions in narrow environments. Maintaining formation while moving through tight environments poses a high risk of collision due to the conflict between preserving the original shape and avoiding obstacles.

These limitations result in the essential of an effective strategy to change the original shape of the formation to another to enhance the rational swarm's motion in narrow spaces. In other studies, strategies based on the structure of narrow environments involve distributed decision-making to enable a new shape of formation~\cite{9565893,AlonsoMora2018}. In~\cite{AlonsoMora2018}, the authors proposed formation change control to adapt to narrow environments with both static and dynamic obstacles using a set of target formation shapes. The approach optimizes parameters such as position, direction, and formation size using a consensus mechanism based on network-wide communication, i.e., a centralized solution based on the limited communication assumption. The formation shapes can be determined by a human designer or calculated automatically. The article employs a distributed consensus mechanism to compute the convex hull of robot positions and determine minimum/maximum positions in the desired movement direction for the entire swarm, subsequently assigning robots to positions within the formation. In this study, however, formation transition was achieved by reassigning robots to virtual points on the reference formation and designing collision-free trajectories to those points, without the robots self-configuring based on local interactions with the environment. Our previous work~\cite{10417519} also changed the shape of the V-shape formation based on the effect of the obstacle to maneuver the robot swarm to a narrow corridor. This V-shaped formation can be shrunk by closing the two wings of the V-shaped formation to the point of forming a straight line depending on the width of the narrow passage. Nevertheless, these approaches do not explicitly consider the physical limitations of the robots, which can result in infeasible control inputs and unexpected collisions in certain settings. Furthermore, the ability of each robot to make its own decisions based on environmental information is still limited.

Motivated by the consistent progress and technological advancements in applications of multi-robot formation in various real-world scenarios, in this paper, we aim to design an optimal deformation control strategy for a decentralized multi-robot team to ensure safety in narrow space environments. The contributions of the paper can be summarized as threefold:
\begin{enumerate}
    \item A perceptual deformation control strategy is proposed to effectively navigate a multi-robot formation moving through narrow environments. Each robot is equipped with local sensors and communication modules to collect information from the surrounding environment and its neighbors for distributed decision-making. The formation thus can be shrunk/expanded or transformed to the line formation according to the environment.
        \item A model prediction-based control strategy is proposed to achieve the navigation requirements of maintaining formation, velocity, and direction, while effectively avoiding collisions. The proposed method models these objectives and constraints into fitness functions that can be easily expanded and deployed to multiple robots simultaneously.
    \item The feasibility and effectiveness of the proposed strategy are demonstrated by simulation and comparison results. A software-in-the-loop experiment was also implemented using flying robots to validate abilities in real-world applications. We also release the source code of the proposed strategy.
\end{enumerate}

The remaining sections of this paper are organized as follows. Section~\ref{sec:problem} describes the formation model. Section~\ref{sec:propose} presents the proposed model prediction-based perceptual deformation control strategy to navigate the multi-robot formation for ensuring collision avoidance in the narrow space environment. Simulation results, comparisons, and a software-in-the-loop experimental validation using aerial robots are given in Section~\ref{sec:result} to highlight the feasibility and efficiency of the proposed strategy. The paper ends with conclusions drawn in Section~\ref{sec:conclusion}.
